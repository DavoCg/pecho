var _ = require('lodash');

var match = {

    getMatching: function(queryArr, placeArr, callback){
        if(!Array.isArray(queryArr) || !Array.isArray(placeArr)){
            return process.nextTick(callback.bind(null, new Error('Cant calculate matching')));
        }
        var intersection = _.intersection(queryArr, placeArr);
        var matching = {
            percent: +((intersection.length / queryArr.length) * 100).toFixed(),
            hashtags : intersection
        };
        return process.nextTick(callback.bind(null, null, matching));
    }
};

module.exports = match;